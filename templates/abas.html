<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <title>VISA Tai√≥beiras</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/static/css/home.css" />

</head>

<body>
    <header class="navbar">
        <div class="navbar-top">
            <div class="navbar-logo">
                <img src="static\img\logo.png" alt="Vigil√¢ncia Sanit√°ria Tai√≥beiras" />
            </div>

            <div class="navbar-search">
                <input type="text" placeholder="O que voc√™ procura?" />
                <button>üîç</button>
            </div>
            <div class="navbar-user">
                üë§ {{ session.get('nome') }}
            </div>


            <form action="/login" id="login" method="post">
                <button class="navbar-login">SAIR</button>
            </form>
        </div>


        <nav class="navbar-menu">

            <a href="{{ url_for('mapa') }}" class="navbar-link">
                <span class="icon">üîç</span>
                <span>MAPA</span>
            </a>

            <a href="{{ url_for('novo_cadastro') }}" class="navbar-link">
                <span class="icon">üè†</span>
                <span>NOVO CADASTRO</span>
            </a>

            <a href="" class="navbar-link">
                <span class="icon">üìÑ</span>
                <span>PUBLICA√á√ïES</span>
            </a>

            <a href="" class="navbar-link">
                <span class="icon">üèõ</span>
                <span>A PREFEITURA</span>
            </a>

            <a href="" class="navbar-link">
                <span class="icon">üèô</span>
                <span>A NOSSA CIDADE</span>
            </a>

            <a href="" class="navbar-link">
                <span class="icon">‚ò∞</span>
                <span>SERVI√áOS</span>
            </a>

        </nav>
    </header>
    <main class="page-content">

        <section class="card">
            <form id="search-form" method="GET" action="/pesquisar_estabelecimentos">
                <div class="form-grid-3">
                    <div class="form-group">
                        <label for="id">ID</label>
                        <input type="text" id="id" name="id" placeholder="ID" value="{{ request.args.get('id','') }}">
                    </div>


                    <div class="form-group">
                        <label for="nivel">N√≠vel</label>
                        <select id="nivel" name="nivel">
                            <option value="">Selecione</option>
                            <option value="1" {% if request.args.get('nivel')=='1' %}selected{% endif %}>
                                Nivel 1
                            </option>
                            <option value="2" {% if request.args.get('nivel')=='2' %}selected{% endif %}>
                                Nivel 2
                            </option>
                            <option value="3" {% if request.args.get('nivel')=='3' %}selected{% endif %}>
                                Nivel  3
                            </option>
                        </select>
                    </div>


                    <div class="form-group">
                        <label for="classe">Classe</label>
                        <input type="text" id="classe" name="classe" placeholder="classe"
                            value="{{ request.args.get('classe','') }}">
                    </div>

                    <div class="form-group form-group--full">
                        <label for="nome_fantasia">Nome Fantasia</label>
                        <input type="text" id="nome_fantasia" name="nome_fantasia" placeholder="Nome Fantasia"
                            value="{{ request.args.get('nome_fantasia','') }}">
                    </div>

                    <div class="form-group">
                        <label for="razao_social">Raz√£o Social</label>
                        <input type="text" id="razao_social" name="razao_social" placeholder="Raz√£o Social"
                            value="{{ request.args.get('razao_social','') }}">
                    </div>

                    <div class="form-group">
                        <label for="endereco">Endere√ßo</label>
                        <input type="text" id="endereco" name="endereco" placeholder="Endere√ßo"
                            value="{{ request.args.get('endereco','') }}">
                    </div>

                    <div class="form-group">
                        <label for="cnpj_ou_cpf">CNPJ</label>
                        <input type="text" id="cnpj_ou_cpf" name="cnpj_ou_cpf" placeholder="CNPJ ou CPF"
                            value="{{ request.args.get('cnpj_ou_cpf','') }}">
                    </div>

                    <div class="form-group date-group">
                        <label for="ultima_inspecao">Inspe√ß√£o</label>
                        <div class="date-input-wrapper">
                            <input type="date" id="ultima_inspecao" name="ultima_inspecao"
                                value="{{ request.args.get('ultima_inspecao','') }}">
                        </div>
                    </div>

                    <div class="form-group date-group">
                        <label for="vigi_risco">Vigi-Risco</label>
                        <div class="date-input-wrapper">
                            <input type="date" id="vigi_risco" name="vigi_risco"
                                value="{{ request.args.get('vigi_risco','') }}">
                        </div>
                    </div>

                    <div class="form-group date-group">
                        <label for="alvara">Alvar√°</label>
                        <div class="date-input-wrapper">
                            <input type="date" id="alvara" name="alvara" value="{{ request.args.get('alvara','') }}">
                        </div>
                    </div>

                    <div class="form-group form-group--full">
                        <label for="fiscal_responsavel">Fiscal Respons√°vel</label>
                        <input type="text" id="fiscal_responsavel" name="fiscal_responsavel"
                            placeholder="Fiscal Respons√°vel" value="{{ request.args.get('fiscal_responsavel','') }}">
                    </div>

                    <div class="form-group form-group--full">
                        <label for="observacoes">Observa√ß√µes</label>
                        <input type="text" id="observacoes" name="observacoes" placeholder="Observa√ß√µes"
                            value="{{ request.args.get('observacoes','') }}">
                    </div>
                </div>

                <div class="form-actions">
                    <a href="{{ url_for('pesquisar_estabelecimentos') }}" class="btn btn-secondary">
                        Limpar
                    </a>
                    <button type="submit" class="btn btn-primary">Pesquisar</button>
                </div>
            </form>
        </section>

        <section class="card card--results">
            <h2>Estabelecimentos encontrados:</h2>

            {% if licencas and licencas|length > 0 %}
            <div class="table-wrapper">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome Fantasia</th>
                            <th>√öltima Inspe√ß√£o</th>
                            <th>Alvar√°</th>
                            <th>Endere√ßo</th>
                            <th>A√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for lic in licencas %}
                        <tr>
                            <td>{{ lic.id }}</td>
                            <td>{{ lic.nome_fantasia }}</td>
                            <td>{{ lic.ultima_inspecao }}</td>
                            <td>{{ lic.alvara }}</td>
                            <td>{{ lic.endereco }}</td>
                            <td>
                                <a href="{{ url_for('analisar_licenca', licenca_id=lic.id) }}"
                                    class="btn btn-sm btn-primary">Analisar</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <p class="no-results">Nenhum estabelecimento encontrado para os filtros informados.</p>
            {% endif %}
        </section>

    </main>

    <script src="/static/javaScript/home.js"></script>
</body>

</html>